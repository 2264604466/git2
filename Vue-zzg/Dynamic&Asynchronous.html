<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>动态组件&异步组件</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/public.css">
</head>

<body>
    <header>
        <div id="header">
            <a id="logo" href="#Vue.js"><img src="img/logo.png" alt="" /><span>Vue.js</span></a>
            <ul id="nav">
                <li>
                    <form id="search-form"><input type="text" id="search-query-nav"></form>
                </li>
                <li class="nav-dropdown-container learn">
                    <a class="nav-link nav-link-block">学习</a>
                    <span class="arrow"></span>
                    <ul class="nav-dropdown">
                        <li>
                            <h4 class="broder-none">文档</h4>
                        </li>
                        <li>
                            <ul>
                                <li><a href="#" class="nav-link">教程</a></li>
                                <li><a href="#" class="nav-link">API</a></li>
                                <li><a href="#" class="nav-link">风格指南</a></li>
                                <li><a href="#" class="nav-link">示例</a></li>
                                <li><a href="#" class="nav-link">Cookbook</a></li>
                            </ul>
                        </li>
                        <li>
                            <h4>视频教程</h4>
                        </li>
                        <li>
                            <ul>
                                <li><a href="#" class="nav-link">Vue Mastery (英文)</a></li>
                                <li><a href="#" class="nav-link">Vue School (英文)</a></li>
                            </ul>
                        </li>
                    </ul>
                </li>
                <li class="nav-dropdown-container ecosystem">
                    <a class="nav-link">生态系统</a><span class="arrow"></span>
                    <ul class="nav-dropdown">
                        <li>
                            <h4>帮助</h4>
                        </li>
                        <li>
                            <ul>
                                <li><a href="#" class="nav-link" target="_blank">论坛</a></li>
                                <li><a href="#" class="nav-link" target="_blank">聊天室</a></li>
                                <li><a href="#" class="nav-link" target="_blank">聚会</a></li>
                            </ul>
                        </li>
                        <li>
                            <h4>工具</h4>
                        </li>
                        <li>
                            <ul>
                                <li><a href="#" class="nav-link" target="_blank">Devtools</a></li>
                                <li><a href="#" class="nav-link" target="_blank">Vue CLI</a></li>
                                <li><a href="#" class="nav-link" target="_blank">Vue Loader</a></li>
                            </ul>
                        </li>
                        <li>
                            <h4>核心插件</h4>
                        </li>
                        <li>
                            <ul>
                                <li><a href="#" class="nav-link" target="_blank">Vue Router</a></li>
                                <li><a href="#" class="nav-link" target="_blank">Vuex</a></li>
                                <li><a href="#" class="nav-link" target="_blank">Vue 服务端渲染</a></li>
                            </ul>
                        </li>
                        <li>
                            <h4>信息</h4>
                        </li>
                        <li>
                            <ul>
                                <li><a href="#" class="nav-link" target="_blank">周刊</a></li>
                                <li><a href="#" class="nav-link" target="_blank">Roadmap</a></li>
                                <li><a href="#" class="nav-link" target="_blank">活动</a></li>
                                <li><a href="#" class="nav-link" target="_blank">Twitter</a></li>
                                <li><a href="#" class="nav-link" target="_blank">博客</a></li>
                                <li><a href="#" class="nav-link" target="_blank">工作</a></li>
                            </ul>
                        </li>
                        <li>
                            <h4>资源列表</h4>
                        </li>
                        <li>
                            <ul>
                                <li><a href="#" class="nav-link" target="_blank">官方仓库</a></li>
                                <li><a href="#" class="nav-link" target="_blank">Vue 优选</a></li>
                                <li><a href="#" class="nav-link" target="_blank">Vue 资源</a></li>
                            </ul>
                        </li>
                    </ul>
                </li>
                <li>
                    <a href="#" class="nav-link team">团队</a>
                </li>
                <li class="nav-dropdown-container support-vue">
                    <a href="#" class="nav-link">支持 Vue</a><span class="arrow"></span>
                    <ul class="nav-dropdown">
                        <li>
                            <ul>
                                <li><a href="#" class="nav-link">一次性赞助</a></li>
                                <li><a href="#" class="nav-link">周期性赞助</a></li>
                                <li><a href="#" class="nav-link">贴纸</a></li>
                                <li><a href="#" target="_blank" class="nav-link">T 恤商店</a></li>
                            </ul>
                        </li>
                    </ul>
                </li>
                <li class="nav-dropdown-container language">
                    <a class="nav-link">多语言</a><span class="arrow"></span>
                    <ul class="nav-dropdown">
                        <li><a href="#" class="nav-link" target="_blank">English</a></li>
                        <li><a href="#" class="nav-link" target="_blank">日本語</a></li>
                        <li><a href="#" class="nav-link" target="_blank">Русский</a></li>
                        <li><a href="#" class="nav-link" target="_blank">한국어</a></li>
                        <li><a href="#" class="nav-link" target="_blank">Português</a></li>
                        <li><a href="#" class="nav-link" target="_blank">Français</a></li>
                        <li><a href="#" class="nav-link" target="_blank">Tiếng Việt</a>
                        </li>
                    </ul>
                </li>
                <li><a href="#" target="_blank" class="nav-link contribute">参与翻译</a></li>
            </ul>
        </div>
    </header>
    <section>
        <div id="main" class="fix-sidebar">
            <div class="sidebar">
                <div class="sidebar-inner">
                    <div class="list">
                        <div id="sidebar-sponsors-special">
                            <div class="main-sponsor">
                                <span>特别赞助商</span>
                                <div>
                                    <a href="#" class="logo">
                                        <img src="img/dcloud.gif" alt="">
                                    </a>
                                </div>
                            </div>
                        </div>
                        <h2>教程
                            <select class="version-select">
                                <option value="SELF" selected="">2.x</option>
                                <option value="v1">1.0</option>
                                <option value="012">0.12</option>
                                <option value="011">0.11</option>
                            </select>
                        </h2>
                        <ul class="menu-root">
                            <li>
                                <h3>基础</h3>
                            </li>
                            <li>
                                <a href="" class="sidebar-link">安装</a>
                            </li>
                            <li>
                                <a href="" class="sidebar-link">介绍</a>
                            </li>
                            <li>
                                <a href="" class="sidebar-link">Vue 实例</a>
                            </li>
                            <li>
                                <a href="" class="sidebar-link">模板语法</a>
                            </li>
                            <li>
                                <a href="" class="sidebar-link">计算属性和侦听器</a>
                            </li>
                            <li>
                                <a href="" class="sidebar-link">Class 与 Style 绑定</a>
                            </li>
                            <li>
                                <a href="" class="sidebar-link">条件渲染</a>
                            </li>
                            <li>
                                <a href="" class="sidebar-link">列表渲染</a>
                            </li>
                            <li>
                                <a href="" class="sidebar-link">事件处理</a>
                            </li>
                            <li>
                                <a href="" class="sidebar-link">表单输入绑定</a>
                            </li>
                            <li>
                                <a href="" class="sidebar-link">组件基础</a>
                            </li>
                            <li>
                                <h3>深入了解组件</h3>
                            </li>
                            <li>
                                <a href="" class="sidebar-link">组件注册</a>
                            </li>
                            <li>
                                <a href="" class="sidebar-link">Prop</a>
                            </li>
                            <li>
                                <a href="" class="sidebar-link">自定义事件</a>
                            </li>
                            <li>
                                <a href="" class="sidebar-link">插槽</a>
                            </li>
                            <li>
                                <a href="" class="sidebar-link current">动态组件 &amp; 异步组件</a>
                                <ul class="menu-sub">
                                    <li><a class="section-link" href="#在动态组件上使用-keep-alive">在动态组件上使用 keep-alive</a></li>
                                    <li><a class="section-link" href="#异步组件">异步组件</a></li>
                                    <ul>
                                        <li><a class="section-link" href="#处理加载状态">处理加载状态</a></li>
                                    </ul>
                                </ul>
                            </li>
                            <li>
                                <a href="" class="sidebar-link">处理边界情况</a>
                            </li>
                            <li>
                                <h3>过渡 &amp; 动画</h3>
                            </li>
                            <li>
                                <a href="" class="sidebar-link">进入/离开 &amp; 列表过渡</a>
                            </li>
                            <li>
                                <a href="" class="sidebar-link">状态过渡</a>
                            </li>
                            <li>
                                <h3>可复用性 &amp; 组合</h3>
                            </li>
                            <li>
                                <a href="" class="sidebar-link">混入</a>
                            </li>
                            <li>
                                <a href="" class="sidebar-link">自定义指令</a>
                            </li>
                            <li>
                                <a href="" class="sidebar-link">渲染函数 &amp; JSX</a>
                            </li>
                            <li>
                                <a href="" class="sidebar-link">插件</a>
                            </li>
                            <li>
                                <a href="" class="sidebar-link">过滤器</a>
                            </li>
                            <li>
                                <h3>工具</h3>
                            </li>
                            <li>
                                <a href="" class="sidebar-link">单文件组件</a>
                            </li>
                            <li>
                                <a href="" class="sidebar-link">单元测试</a>
                            </li>
                            <li>
                                <a href="" class="sidebar-link">TypeScript 支持</a>
                            </li>
                            <li>
                                <a href="" class="sidebar-link">生产环境部署</a>
                            </li>
                            <li>
                                <h3>规模化</h3>
                            </li>
                            <li>
                                <a href="" class="sidebar-link">路由</a>
                            </li>
                            <li>
                                <a href="" class="sidebar-link">状态管理</a>
                            </li>
                            <li>
                                <a href="" class="sidebar-link">服务端渲染</a>
                            </li>
                            <li>
                                <h3>内在</h3>
                            </li>
                            <li>
                                <a href="" class="sidebar-link">深入响应式原理</a>
                            </li>
                            <li>
                                <h3>迁移</h3>
                            </li>
                            <li>
                                <a href="" class="sidebar-link">从 Vue 1.x 迁移</a>
                            </li>
                            <li>
                                <a href="" class="sidebar-link">从 Vue Router 0.7.x 迁移</a>
                            </li>
                            <li>
                                <a href="" class="sidebar-link">从 Vuex 0.6.x 迁移到 1.0</a>
                            </li>
                            <li>
                                <h3>更多</h3>
                            </li>
                            <li>
                                <a href="" class="sidebar-link">对比其他框架</a>
                            </li>
                            <li>
                                <a href="" class="sidebar-link">加入 Vue.js 社区</a>
                            </li>
                            <li>
                                <a href="" class="sidebar-link">认识团队</a>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="content guide with-sidebar instance-guide">
                <div id="ad">
                    <span style="float: right;">广告</span>
                    <a href="#">
                        <img src="img/tencent-ad.png">
                    </a>
                </div>
                <h1>动态组件&异步组件</h1>
                <div class="ad-pagetop">
                    <a href="">
                        <span class="name">TPshop</span>
                        <span class="description">中国免费商城系统 - 搜豹商城系统</span>
                        <span class="action">立即查看 &gt;</span>
                    </a>
                </div>
                <blockquote>
                    <p>该页面假设你已经阅读过了<a href="">组件基础</a>。如果你还对组件不太了解，推荐你先阅读它。</p>
                </blockquote>
                <h2 id="在动态组件上使用-keep-alive"><a href="#在动态组件上使用-keep-alive" class="headerlink"
                        title="在动态组件上使用 keep-alive">在动态组件上使用 <code>keep-alive</code></a></h2>
                <p>我们之前曾经在一个多标签的界面中使用 <code>is</code> 特性来切换不同的组件：</p>
                <pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">component</span> <span class="hljs-attr">v-bind:is</span>=<span class="hljs-string">"currentTabComponent"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">component</span>&gt;</span></code></pre>
                <p>当在这些组件之间切换的时候，你有时会想保持这些组件的状态，以避免反复重渲染导致的性能问题。例如我们来展开说一说这个多标签界面：</p>
                <div id="dynamic-component-demo" class="demo"><button
                        class="dynamic-component-demo-tab-button dynamic-component-demo-active">Posts</button><button
                        class="dynamic-component-demo-tab-button">Archive</button>
                    <div class="dynamic-component-demo-posts-tab dynamic-component-demo-tab">
                        <ul class="dynamic-component-demo-posts-sidebar">
                            <li class=""> Cat Ipsum </li>
                            <li class=""> Hipster Ipsum </li>
                            <li class=""> Cupcake Ipsum </li>
                        </ul>
                        <div class="dynamic-component-demo-post-container"><strong> Click on a blog title to the left to
                                view it. </strong></div>
                    </div>
                </div>
                <p>你会注意到，如果你选择了一篇文章，切换到 <em>Archive</em> 标签，然后再切换回 <em>Posts</em>，是不会继续展示你之前选择的文章的。这是因为你每次切换新标签的时候，Vue
                    都创建了一个新的 <code>currentTabComponent</code> 实例。</p>
                <p>重新创建动态组件的行为通常是非常有用的，但是在这个案例中，我们更希望那些标签的组件实例能够被在它们第一次被创建的时候缓存下来。为了解决这个问题，我们可以用一个
                    <code>&lt;keep-alive&gt;</code> 元素将其动态组件包裹起来。</p>
                <pre><code class="hljs html"><span class="hljs-comment">&lt;!-- 失活的组件将会被缓存！--&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">keep-alive</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">component</span> <span class="hljs-attr">v-bind:is</span>=<span class="hljs-string">"currentTabComponent"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">component</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">keep-alive</span>&gt;</span></code></pre>
                <p>来看看修改后的结果：</p>
                <div id="dynamic-component-keep-alive-demo" class="demo"><button
                        class="dynamic-component-demo-tab-button dynamic-component-demo-active">Posts</button><button
                        class="dynamic-component-demo-tab-button">Archive</button>
                    <div class="dynamic-component-demo-posts-tab dynamic-component-demo-tab">
                        <ul class="dynamic-component-demo-posts-sidebar">
                            <li class=""> Cat Ipsum </li>
                            <li class=""> Hipster Ipsum </li>
                            <li class=""> Cupcake Ipsum </li>
                        </ul>
                        <div class="dynamic-component-demo-post-container"><strong> Click on a blog title to the left to
                                view it. </strong></div>
                    </div>
                </div>
                <p>现在这个 <em>Posts</em> 标签保持了它的状态 (被选中的文章) 甚至当它未被渲染时也是如此。你可以在<a href="">这个 fiddle</a> 查阅到完整的代码。</p>
                <p class="tip">注意这个 <code>&lt;keep-alive&gt;</code> 要求被切换到的组件都有自己的名字，不论是通过组件的 <code>name</code>
                    选项还是局部/全局注册。</p>
                <p>你可以在 <a href="../api/#keep-alive">API 参考文档</a> 查阅更多关于 <code>&lt;keep-alive&gt;</code> 的细节。</p>
                <h2 id="异步组件"><a href="#异步组件" class="headerlink" title="异步组件" data-scroll="">异步组件</a></h2>
                <div class="vueschool"><a href="">Watch a free video lesson on Vue School</a></div>
                <p>在大型应用中，我们可能需要将应用分割成小一些的代码块，并且只在需要的时候才从服务器加载一个模块。为了简化，Vue 允许你以一个工厂函数的方式定义你的组件，这个工厂函数会异步解析你的组件定义。Vue
                    只有在这个组件需要被渲染的时候才会触发该工厂函数，且会把结果缓存起来供未来重渲染。例如：</p>
                <pre><code class="hljs js">Vue.component(<span class="hljs-string">'async-example'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">resolve, reject</span>) </span>{
  setTimeout(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
    <span class="hljs-comment">// 向 `resolve` 回调传递组件定义</span>
    resolve({
      <span class="hljs-attr">template</span>: <span class="hljs-string">'&lt;div&gt;I am async!&lt;/div&gt;'</span>
    })
  }, <span class="hljs-number">1000</span>)
})</code></pre>
                <p>如你所见，这个工厂函数会收到一个 <code>resolve</code> 回调，这个回调函数会在你从服务器得到组件定义的时候被调用。你也可以调用 <code>reject(reason)</code>
                    来表示加载失败。这里的 <code>setTimeout</code> 是为了演示用的，如何获取组件取决于你自己。一个推荐的做法是将异步组件和 <a href="">webpack 的
                        code-splitting 功能</a>一起配合使用：
                </p>
                <pre><code class="hljs js">Vue.component(<span class="hljs-string">'async-webpack-example'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">resolve</span>) </span>{
 &nbsp;<span class="hljs-comment">// 这个特殊的 `require` 语法将会告诉 webpack</span>
  <span class="hljs-comment">// 自动将你的构建代码切割成多个包，这些包</span>
  <span class="hljs-comment">// 会通过 Ajax 请求加载</span>
  <span class="hljs-built_in">require</span>([<span class="hljs-string">'./my-async-component'</span>], resolve)
})</code></pre>
                <p>你也可以在工厂函数中返回一个 <code>Promise</code>，所以把 webpack 2 和 ES2015 语法加在一起，我们可以写成这样：</p>
                <pre><code class="hljs js">Vue.component(
  <span class="hljs-string">'async-webpack-example'</span>,
  <span class="hljs-comment">// 这个 `import` 函数会返回一个 `Promise` 对象。</span>
  () =&gt; <span class="hljs-keyword">import</span>(<span class="hljs-string">'./my-async-component'</span>)
)</code></pre>
                <p>当使用<a href="components-registration.html#局部注册">局部注册</a>的时候，你也可以直接提供一个返回 <code>Promise</code> 的函数：</p>
                <pre><code class="hljs js"><span class="hljs-keyword">new</span> Vue({
  <span class="hljs-comment">// ...</span>
  components: {
    <span class="hljs-string">'my-component'</span>: <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">'./my-async-component'</span>)
  }
})</code></pre>
                <p class="tip">如果你是一个 <strong>Browserify</strong> 用户同时喜欢使用异步组件，很不幸这个工具的作者<a href="">明确表示</a>异步加载“并不会被
                    Browserify 支持”，至少官方不会。Browserify 社区已经找到了<a href="">一些变通方案</a>，这些方案可能会对已存在的复杂应用有帮助。对于其它的场景，我们推荐直接使用
                    webpack，以拥有内置的头等异步支持。
                </p>
                <h3 id="处理加载状态"><a href="#处理加载状态" class="headerlink">处理加载状态</a></h3>
                <blockquote>
                    <p>2.3.0+ 新增</p>
                </blockquote>
                <p>这里的异步组件工厂函数也可以返回一个如下格式的对象：</p>
                <pre><code class="hljs js"><span class="hljs-keyword">const</span> AsyncComponent = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> ({
  <span class="hljs-comment">// 需要加载的组件 (应该是一个 `Promise` 对象)</span>
  component: <span class="hljs-keyword">import</span>(<span class="hljs-string">'./MyComponent.vue'</span>),
  <span class="hljs-comment">// 异步组件加载时使用的组件</span>
  loading: LoadingComponent,
  <span class="hljs-comment">// 加载失败时使用的组件</span>
  error: ErrorComponent,
  <span class="hljs-comment">// 展示加载时组件的延时时间。默认值是 200 (毫秒)</span>
  delay: <span class="hljs-number">200</span>,
  <span class="hljs-comment">// 如果提供了超时时间且组件加载也超时了，</span>
  <span class="hljs-comment">// 则使用加载失败时使用的组件。默认值是：`Infinity`</span>
  timeout: <span class="hljs-number">3000</span>
})</code></pre>
                <blockquote>
                    <p>注意如果你希望在 <a href="">Vue
                            Router</a> 的路由组件中使用上述语法的话，你必须使用 Vue Router 2.4.0+ 版本。</p>
                </blockquote>
                <div class="guide-links">
                    <span>← <a href="">插槽</a></span>
                    <span style="float: right;"><a href="">处理边界情况</a> →</span>
                </div>
                <div class="footer">
                    <div class="bsa-cpc"></div>
                    发现错误？想参与编辑？
                    <a href="">
                        在 GitHub 上编辑此页！
                    </a>
                </div>
            </div>
        </div>
    </section>
</body>

</html>